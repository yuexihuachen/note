(()=>{"use strict";var e={5777:(e,t,a)=>{var n=a(4065),r=a(5019),c=a(9111),o=a(9113),l=a(8099),s=a(2853),i=a(3845),u=a.n(i),d=a(9398),m=(0,d.oM)({name:"counter",initialState:{title:"",category:"",content:"",isPush:0},reducers:{changeTitle:function(e,t){e.title=t.payload.title},changeCategory:function(e,t){e.category=t.payload.category},changeContent:function(e,t){e.content=t.payload.content},changePush:function(e,t){e.isPush=t.payload.isPush},changeData:function(e,t){e=Object.assign(e,{title:t.payload.title,category:t.payload.category,content:t.payload.content,isPush:t.payload.isPush})}}}),v=m.actions,f=v.changeTitle,h=v.changeCategory,p=v.changeContent,g=v.changePush,E=v.changeData,y=function(e){return e.SubmitReducer};const N=m.reducer;var b=function(){return(0,c.I0)()},x=c.v9,w=(a(3741),a(2072),null);function k(){var e=b(),t=x(y),a=function(t){e(p({content:t}))},r=(0,n.useRef)(null);return(0,n.useEffect)((function(){w&&w.setValue(t.content)}),[w]),(0,n.useEffect)((function(){(w=u().fromTextArea(r.current,{theme:"seti",lineNumbers:!0,lineWrapping:!0,direction:"ltl",styleActiveLine:!0,matchBrackets:!0,value:t.content})).on("change",(function(){a(w.getValue())}))}),[]),n.createElement("div",{className:"content"},n.createElement("div",{className:"columns"},n.createElement("div",{className:"column"},n.createElement("section",{className:"hero"},n.createElement("div",{className:"hero-body"},n.createElement("textarea",{ref:r,value:t.content,onChange:function(e){a(e.target.value)}})))),n.createElement("div",{className:"column"},n.createElement("section",{className:"hero"},n.createElement("div",{className:"hero-body"},n.createElement("div",{className:"markdown-body"},n.createElement(o.D,{children:t.content,remarkPlugins:[l.Z],rehypePlugins:[s.Z]})))))))}var P=a(6438),C=a(4070),O=a(1512),S=(0,P.LC)({reducerPath:"category",baseQuery:(0,C.ni)({baseUrl:"/",prepareHeaders:function(e,t){var a=t.getState;e.set("requestId","".concat((0,O.x0)()));var n=a();return n&&e.set("authorization","Bearer ".concat(n)),e}}),endpoints:function(e){return{getCategoryByName:e.query({query:function(e){return{url:"".concat(e),method:"GET",headers:{"content-type":"text/plain"},params:{name:e}}}})}}}),_=S.useGetCategoryByNameQuery;function j(){var e=_("getCategory"),t=e.data,a=e.isLoading,r=b(),c=x(y);return n.createElement("div",{className:"headers"},n.createElement("div",{className:"columns"},n.createElement("div",{className:"column"},n.createElement("section",{className:"hero"},n.createElement("div",{className:"hero-body"},n.createElement("div",{className:"field"},n.createElement("div",{className:"control"},n.createElement("input",{className:"input is-large",value:c.title,autoComplete:"off",onChange:function(e){return t=e.target.value,void r(f({title:t}));var t},type:"text",placeholder:"\u6587\u7ae0\u6807\u9898"})))))),n.createElement("div",{className:"column"},n.createElement("section",{className:"hero is-bold"},n.createElement("div",{className:"hero-body"},n.createElement("div",{className:"field"},n.createElement("div",{className:"control"},n.createElement("div",{className:"select is-large select"},n.createElement("select",{className:"select",value:c.category,onChange:function(e){return t=e.target.value,void r(h({category:t}));var t}},!a&&t.data.map((function(e){return n.createElement("option",{key:e.category_id,value:e.category_id},e.category_name)})))))))))))}var L=a(6754),Z=a.n(L),T=function(e){var t="\u64cd\u4f5c\u6210\u529f";e&&(t="\u64cd\u4f5c\u5931\u8d25"),alert(t)},A=a(1787),B=a.n(A),D=function(e,t,a,n){return new(a||(a=Promise))((function(r,c){function o(e){try{s(n.next(e))}catch(t){c(t)}}function l(e){try{s(n.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}s((n=n.apply(e,t||[])).next())}))};function R(){var e=this,t=b(),a=x(y),r=_("getCategory").data,c=function(t){return D(e,void 0,void 0,Z().mark((function e(){var n,r,c,o,l;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.title,r=a.content,c=a.category,o=a.isPush,n&&r){e.next=5;break}alert("\u65e5\u8bb0\u6807\u9898\u6216\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"),e.next=9;break;case 5:return e.next=7,B().post("/setArticle",{id:t,title:n,content:r,isPush:o,category:c});case 7:return l=e.sent,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})))};return(0,n.useEffect)((function(){var e=new URLSearchParams(location.search).get("id");e&&B().post("/searchNote",{article_id:e}).then((function(e){var a,n;if(null===(n=null===(a=null===e||void 0===e?void 0:e.data)||void 0===a?void 0:a.data)||void 0===n?void 0:n.length){var r=e.data.data[0];t(E({title:r.title,category:r.category_id,content:r.content,isPush:r.is_push}))}}))}),[]),n.createElement("div",{className:"headers"},n.createElement("div",{className:"columns"},n.createElement("div",{className:"column"},n.createElement("section",{className:"hero"},n.createElement("div",{className:"hero-body"},n.createElement("div",{className:"field"},n.createElement("div",{className:"control"},n.createElement("label",{className:"checkbox is-push"},n.createElement("input",{type:"checkbox",checked:a.isPush,onChange:function(e){return a=e.target.checked,void t(g({isPush:a?1:0}));var a}}),"\u662f\u5426\u53d1\u5e03")))))),n.createElement("div",{className:"column"},n.createElement("section",{className:"hero is-bold"},n.createElement("div",{className:"hero-body"},n.createElement("div",{className:"field"},n.createElement("div",{className:"control"},n.createElement("button",{onClick:function(){return D(e,void 0,void 0,Z().mark((function t(){var n,o,l,s,i,u,d,m,v,f;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=new URLSearchParams(location.search),!(u=i.get("id"))){t.next=10;break}return t.next=5,c(u);case 5:d=t.sent,m=null===(o=null===(n=null===d||void 0===d?void 0:d.data)||void 0===n?void 0:n.data)||void 0===o?void 0:o.message,T(m),t.next=15;break;case 10:return t.next=12,D(e,void 0,void 0,Z().mark((function e(){var t,n,c,o,l,s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.data.length&&r.data[0].category_id,n=a.title,c=a.content,o=a.category,l=a.isPush,n&&c){e.next=6;break}alert("\u65e5\u8bb0\u6807\u9898\u6216\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"),e.next=10;break;case 6:return e.next=8,B().post("/setArticle",{title:n,content:c,isPush:l,category:o.length?o:t});case 8:return s=e.sent,e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})));case 12:v=t.sent,f=null===(s=null===(l=null===v||void 0===v?void 0:v.data)||void 0===l?void 0:l.data)||void 0===s?void 0:s.message,T(f);case 15:case"end":return t.stop()}}),t)})))},className:"button  is-success is-fullwidth "},"\u63d0\u4ea4"))))))))}var M=a(7021),q=function(e,t,a,n){return new(a||(a=Promise))((function(r,c){function o(e){try{s(n.next(e))}catch(t){c(t)}}function l(e){try{s(n.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,l)}s((n=n.apply(e,t||[])).next())}))};const I=function(){var e=this,t=(0,n.useState)(""),a=(0,M.Z)(t,2),r=a[0],c=a[1],o=(0,n.useState)(""),l=(0,M.Z)(o,2),s=l[0],i=l[1],u=(0,n.useState)(!0),d=(0,M.Z)(u,2),m=d[0],v=d[1];(0,n.useEffect)((function(){B().get("/isLogin").then((function(e){var t,a;v(!!(null===(a=null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.data)||void 0===a?void 0:a.isLogin))}))}),[]);var f=function(){return q(e,void 0,void 0,Z().mark((function e(){var t,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B().post("/login",{uname:r,pwd:s});case 2:a=e.sent,(null===(t=null===a||void 0===a?void 0:a.data)||void 0===t?void 0:t.message.includes("success"))&&v(!0);case 4:case"end":return e.stop()}}),e)})))},h=function(e){"Enter"===e.code&&f()};return n.createElement("div",{className:"modal ".concat(m?"":"is-active")},n.createElement("div",{className:"modal-background"}),n.createElement("div",{className:"modal-content"},n.createElement("div",{className:"box"},n.createElement("div",{className:"field"},n.createElement("p",{className:"control has-icons-left has-icons-right"},n.createElement("input",{value:r,onChange:function(e){return c(e.target.value)},className:"input",type:"email",onKeyDown:h,placeholder:"\u7528\u6237\u540d"}),n.createElement("span",{className:"icon is-small is-left"},n.createElement("i",{className:"fas icon-user"})))),n.createElement("div",{className:"field"},n.createElement("p",{className:"control has-icons-left"},n.createElement("input",{value:s,onChange:function(e){return i(e.target.value)},className:"input",type:"password",onKeyDown:h,placeholder:"\u5bc6\u7801"}),n.createElement("span",{className:"icon is-small is-left"},n.createElement("i",{className:"fas icon-lock"})))),n.createElement("div",{className:"field"},n.createElement("p",{className:"control"},n.createElement("button",{onClick:f,className:"button is-success is-fullwidth"},"\u767b\u5f55"))))))};const U=function(){return n.createElement("div",{className:"App"},n.createElement(j,null),n.createElement(k,null),n.createElement(R,null),n.createElement(I,null))};var z,G=a(1864);const K=(0,d.xC)({reducer:(z={},(0,G.Z)(z,S.reducerPath,S.reducer),(0,G.Z)(z,"SubmitReducer",N),z),middleware:function(e){return e().concat(S.middleware)}});r.s(document.getElementById("root")).render(n.createElement(c.zt,{store:K},n.createElement(U,null)))}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var c=t[n]={exports:{}};return e[n].call(c.exports,c,c.exports,a),c.exports}a.m=e,(()=>{var e=[];a.O=(t,n,r,c)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){for(var[n,r,c]=e[u],l=!0,s=0;s<n.length;s++)(!1&c||o>=c)&&Object.keys(a.O).every((e=>a.O[e](n[s])))?n.splice(s--,1):(l=!1,c<o&&(o=c));if(l){e.splice(u--,1);var i=r();void 0!==i&&(t=i)}}return t}c=c||0;for(var u=e.length;u>0&&e[u-1][2]>c;u--)e[u]=e[u-1];e[u]=[n,r,c]}})(),a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=562,(()=>{var e={562:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,c,[o,l,s]=n,i=0;if(o.some((t=>0!==e[t]))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(s)var u=s(a)}for(t&&t(n);i<o.length;i++)c=o[i],a.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return a.O(u)},n=self.webpackChunkbuild=self.webpackChunkbuild||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=a.O(void 0,[313],(()=>a(5777)));n=a.O(n)})();